{
    "openapi": "3.0.0",
    "info": {
        "title": "Payment Gateway API",
        "description": "Payment Gateway API for processing payments, managing refunds, and handling webhooks",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Local Development Server"
        }
    ],
    "paths": {
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new merchant account",
                "operationId": "c7bb21a0d87049e161b8e4c9b0d909f2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "business_name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "john@example.com"
                                    },
                                    "business_name": {
                                        "type": "string",
                                        "example": "Acme Corp"
                                    },
                                    "webhook_url": {
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://example.com/webhook"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Merchant registered successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Merchant registered successfully"
                                        },
                                        "merchant": {
                                            "type": "object"
                                        },
                                        "api_key": {
                                            "type": "string",
                                            "example": "pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
                                        },
                                        "warning": {
                                            "type": "string",
                                            "example": "Please save your API key. It will not be shown again."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/auth/me": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get current merchant information",
                "operationId": "b5de204f5e452ef51327c691aa99e77c",
                "responses": {
                    "200": {
                        "description": "Merchant information retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "merchant": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/auth/generate-key": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Generate a new API key",
                "operationId": "d5ae569befa014fc70255e6f76c3f336",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "test",
                                            "live"
                                        ],
                                        "example": "test"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "API key generated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "api_key": {
                                            "type": "string"
                                        },
                                        "type": {
                                            "type": "string"
                                        },
                                        "warning": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/payments/initialize": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Initialize a new payment",
                "operationId": "4fccbfd8da6e303eb785775c32ecf1c8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "amount",
                                    "currency"
                                ],
                                "properties": {
                                    "amount": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 100
                                    },
                                    "currency": {
                                        "type": "string",
                                        "enum": [
                                            "USD",
                                            "ZMW"
                                        ],
                                        "example": "USD"
                                    },
                                    "customer_email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "customer@example.com"
                                    },
                                    "customer_name": {
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "metadata": {
                                        "type": "object",
                                        "example": {
                                            "order_id": "12345"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Payment initialized successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "payment": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/payments/process": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Process a payment with card details",
                "operationId": "658d69d2c752fb12e3b30342bb55d864",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "payment_reference",
                                    "card_number",
                                    "exp_month",
                                    "exp_year",
                                    "cvc"
                                ],
                                "properties": {
                                    "payment_reference": {
                                        "type": "string",
                                        "example": "pay_xxxxxxxxxxxxxxxxxxxx"
                                    },
                                    "card_number": {
                                        "type": "string",
                                        "example": "4242424242424242"
                                    },
                                    "exp_month": {
                                        "type": "string",
                                        "example": "12"
                                    },
                                    "exp_year": {
                                        "type": "string",
                                        "example": "25"
                                    },
                                    "cvc": {
                                        "type": "string",
                                        "example": "123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Payment processed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "payment": {
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Payment processing failed"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/payments/{reference}": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Verify/Get payment details",
                "operationId": "17f0d042cdfd003724aca51acc23572e",
                "parameters": [
                    {
                        "name": "reference",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment details retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "payment": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Payment not found"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/refunds": {
            "post": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Create a refund for a payment",
                "operationId": "911179725792cdb668d36cfec3625908",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "payment_reference"
                                ],
                                "properties": {
                                    "payment_reference": {
                                        "type": "string",
                                        "example": "pay_xxxxxxxxxxxxxxxxxxxx"
                                    },
                                    "amount": {
                                        "description": "Partial refund amount (optional, defaults to full amount)",
                                        "type": "number",
                                        "format": "float",
                                        "example": 50
                                    },
                                    "reason": {
                                        "type": "string",
                                        "example": "Customer requested"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Refund created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "refund": {
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Refund failed"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/refunds/{reference}": {
            "get": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Get refund details",
                "operationId": "46e52b5eaf136148dc79bd514cf34b29",
                "parameters": [
                    {
                        "name": "reference",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Refund details retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "refund": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Refund not found"
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        },
        "/api/transactions": {
            "get": {
                "tags": [
                    "Transactions"
                ],
                "summary": "Get transaction history",
                "operationId": "9b50e29e364179ebde24ac5fc59cd442",
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "charge",
                                "refund",
                                "failed"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "offset",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Transactions retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "transactions": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        },
                                        "limit": {
                                            "type": "integer"
                                        },
                                        "offset": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "apiKey": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "apiKey": {
                "type": "http",
                "bearerFormat": "API Key",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Payments",
            "description": "Payments"
        },
        {
            "name": "Refunds",
            "description": "Refunds"
        },
        {
            "name": "Transactions",
            "description": "Transactions"
        }
    ]
}